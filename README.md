**■サービス名**

立方体の切断 (中学受験算数 学習用シミュレーター)

**■サービス概要**

小学生向けの教育コンテンツとして、立方体を切断シミュレーションできるサービスです。
立方体を切断するとは、立方体を大きな平面で2つに分割すること。小学5年生ごろに習う単元で、中学受験では必須。立方体には12本の辺と8つの頂点があるが、よくある問題ではその中から3点を切断点として指定され、切断した時の切断面や、切断後立体の体積などを問われるものが主流です。難関中になってくると、2回切断をしなければならない時もあります。3点は、平面を構成する最小の個数です。同じ平面上の3点は選べません。
サービス機能は主に２つで、シミュレーション機能と学習サポート機能があります。

- **切断シミュレーション機能:**
    
    立方体から切断点を3つ選択し、1回切断した立体をマウス操作で回転させて観察できます。3点の取得は、同じ平面上の3点は選べないようにしています。切断点は、頂点、中点、辺上の任意の点から選べる。任意の点は、辺の比を使って選択できます。（例: 辺ABを1:2で分ける点)
    
- **学習サポート機能:**
    
    切断履歴を振り返ることができます。またログインユーザーは切断立体をお気に入り登録したり、切断立体を利用して問題を作成し掲示板にアップしたりすることができます。
    

**■ このサービスへの思い・作りたい理由**

塾講師時代に自主勉強をしていた時、難しい切断(その時は2回切断)を目の前にして、立体の切断をシミュレーションできるアプリがあればいいのになと思ったことがきっかけです。小学生にとってこの単元は、頭の中でイメージするのが難しく、板書やプリントでは理解するのが難しい単元です。3次元立体を実際に見る方が理解しやすく、立体感覚が身につくのではないかとと考え、小学生向けの教育コンテンツとしてこのアプリを開発することを決めました。

**■ ユーザー層について**

- **メインユーザー:** 小学5~6年生、親子
- **サービスの利用イメージ:** 子供が家庭学習時にタブレットやスマートフォンから利用する。
- **ユーザーが得られる体験:**
    
    前：黒板やプリントなど平面媒体の解説では理解できない。立体の切断のイメージができず、単元に苦手意識がある。
    
    後：実際にシュミレーションを行い観察することで理解が深まる。立体感覚を養い、苦手意識を克服する。
    

**■ 主な画面での機能と操作手順について**

- ホーム画面: 立方体からフレキシブルに任意の点を3つ選択し、切断ボタンを押す。
- 立体詳細画面: 切断後の立体が表示される。立体を回転させたりして観察できる。タイトルやメモを設定できる。
- 履歴画面: 切断後の立体を一覧で確認できる。
- (ログイン必須)マイページ画面: ブックマークした立体や、切断履歴から問題を作成できる。
- (ログイン必須)掲示板画面: 他ユーザーが作成した問題を閲覧し、いいねやお気に入りを追加できる。

■ **サービスの差別化ポイント・推しポイント**

- **小学生でも簡潔なステップで切断ができる:**
    
   多くのシミュレーションソフトは、座標形式で切断点を選択したり、副次的な設定が必要だったりして、
小学生には使いにくく、不要な機能も多いです。このアプリでは立方体を切断することに特化して、必要
な動作は「表示されている立体から切断点を選択するだけ」というシンプルな作業で目的を達成できるよ
うにしました。

- **小学生に馴染みのある辺の比を利用した座標取得:**

    小学生は(x, y, z)座標を未修なので、比の形式(例: 辺ABを1:2で分ける点など)で座標を取得できるようにし
ました。ドロップダウンメニューを設け、よく使われる辺の比は選択肢から選べるようにしました。

- **シミュレーションの結果を保存できる学習サポート機能:**
    
    多くのシュミレーションソフトは計算を行うことが目的で、切断した結果を保存する機能まで保持してい
ません。このアプリは学習コンテンツですので、「履歴を見る」「切断結果をコレクションする」「切断
を利用した問題を作成する」「掲示板で問題を共有する」などの機能を設け、1. 学習の振り返りを推奨す
る、2. 問題を作るなどを行う中で楽しく学習する、3. 掲示板機能でユーザーの定着を図る、ことを意識し
ました。

- **小学生でも使いやすい直感的でシンプルな操作:**

    ユーザーがどこからでも希望のページに行くことができる、または行き方が明確にわかるように、導線を
複数準備しました。具体的には、マイページから問題を作れることに加えて切断詳細ページからも切断を
選択した状態で問題作成することができたり、詳細ページから直接編集ができ即時反映されたり、とい
うところを工夫しました。また、編集画面では、[[切断点]]と入力すると自身の切断点が置換される機能
を作成し、informationボタンを押すとその説明が開くようにしました。そのほかボタンは、ホーバーする
とボタンの説明が出るようにするなど、ユーザーの目線で工夫しました。
    

**■ 機能候補**

[ MVP機能 ]

- シミュレーション機能
    - 立方体からマウス操作と編集欄で任意の点を選択できる
    - 選択した点をもとに立方体を切断できる(1回切断)
    - 切断後の立体をマウス操作で拡大や回転ができる
- 学習サポート機能
    - 履歴機能
    - ログイン機能
    - ブックマーク機能(ログイン必須)
        - 切断立体をブックマークしてマイページで閲覧できる
    - マイページ機能
        - ユーザー詳細やログアウトができる。
        - ブックマークした問題を閲覧できる。
        - 切断履歴を元に問題を作成し、公開設定をすることが出来る。
        - 自分が作成した問題を閲覧できる。
    - 掲示板機能(ログイン必須)
        - 掲示板にある他ユーザーの問題を閲覧できる。
        - 他ユーザーの問題にいいねできる。
        - 他ユーザーの問題をお気に入りできる。
        - 掲示板の問題を並び替えることができる。

[ その他時間があれば ]

- 切断後の立体の切断面を色を変えて表示する。
- 切断後の立体の体積を表示する。
- 2回切断ができる。

■ 機能の実装方針予定

- フロントエンド: React, TypeScript, R3F
  Reactの基礎は、ネットの記事を見ながら学んだ。RUNTEQの「TypeScriptで学ぶReactも」履修した。それ以外の個々の機能はchatGPTも活用した。RailsがReactを提供する形にしている。Reactのエントリポイントであるindex.jsをpublicに書き出し、Railsのindex.htmlがそれを参照してReactが提供されるようにした。全てのビューをReactで実装済み。
- バックエンド: RailsAPI, BlenderAPI
- 切断処理の実装方針
  フロントで取得した座標をAPI通信でRailsに送信し、RailsからBlenderに渡すことで、Blenderが切断処理を行う。切断後BlendergaGLBエクスポートを行い、Railsで取得してActiveStorageに紐付けする。その後再度フロントからRailsにGETリクエストを送信し、Railsがglbファイルと一緒にデータをフロントに返して、R3Fで描画する。

■ 画面遷移図

Figma：https://www.figma.com/board/1muSjeudChFFLTUbAEIYuS/cut_cube_simulator-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB%E5%9B%B3?t=BlIjxTUAXvq8eBGn-6

■ ER図

![image](https://github.com/user-attachments/assets/af46a1a6-8aa6-42a3-9717-ddef2f2048eb)

