// zustand@3.7.2 downloaded from https://ga.jspm.io/npm:zustand@3.7.2/esm/index.js

import{useEffect as t,useLayoutEffect as e,useReducer as n,useRef as r,useDebugValue as c}from"react";function createStore(t){let e;const n=new Set;const setState=(t,r)=>{const c="function"===typeof t?t(e):t;if(c!==e){const t=e;e=r?c:Object.assign({},e,c);n.forEach((n=>n(e,t)))}};const getState=()=>e;const subscribeWithSelector=(t,r=getState,c=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=r(e);function listenerToAdd(){const n=r(e);if(!c(o,n)){const e=o;t(o=n,e)}}n.add(listenerToAdd);return()=>n.delete(listenerToAdd)};const subscribe=(t,e,r)=>{if(e||r)return subscribeWithSelector(t,e,r);n.add(t);return()=>n.delete(t)};const destroy=()=>n.clear();const r={setState:setState,getState:getState,subscribe:subscribe,destroy:destroy};e=t(setState,getState,r);return r}const o="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);const s=o?t:e;function create(t){const e="function"===typeof t?createStore(t):t;const useStore=(t=e.getState,o=Object.is)=>{const[,u]=n((t=>t+1),0);const i=e.getState();const a=r(i);const d=r(t);const l=r(o);const f=r(false);const S=r();void 0===S.current&&(S.current=t(i));let b;let g=false;if(a.current!==i||d.current!==t||l.current!==o||f.current){b=t(i);g=!o(S.current,b)}s((()=>{g&&(S.current=b);a.current=i;d.current=t;l.current=o;f.current=false}));const w=r(i);s((()=>{const listener=()=>{try{const t=e.getState();const n=d.current(t);if(!l.current(S.current,n)){a.current=t;S.current=n;u()}}catch(t){f.current=true;u()}};const t=e.subscribe(listener);e.getState()!==w.current&&listener();return t}),[]);const p=g?b:S.current;c(p);return p};Object.assign(useStore,e);useStore[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const t=[useStore,e];return{next(){const e=t.length<=0;return{value:t.shift(),done:e}}}};return useStore}export{create as default};

