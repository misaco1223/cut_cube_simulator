// its-fine@1.2.5 downloaded from https://ga.jspm.io/npm:its-fine@1.2.5/dist/index.js

import*as e from"react";var t=Object.defineProperty;var r=Object.defineProperties;var n=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var i=Object.prototype.hasOwnProperty;var s=Object.prototype.propertyIsEnumerable;var __defNormalProp=(e,r,n)=>r in e?t(e,r,{enumerable:true,configurable:true,writable:true,value:n}):e[r]=n;var __spreadValues=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&__defNormalProp(e,r,t[r]);if(o)for(var r of o(t))s.call(t,r)&&__defNormalProp(e,r,t[r]);return e};var __spreadProps=(e,t)=>r(e,n(t));var u,a;const c=typeof window==="undefined"||!((u=window.document)==null?void 0:u.createElement)&&((a=window.navigator)==null?void 0:a.product)!=="ReactNative"?e.useEffect:e.useLayoutEffect;function traverseFiber(e,t,r){if(!e)return;if(r(e)===true)return e;let n=t?e.return:e.child;while(n){const e=traverseFiber(n,t,r);if(e)return e;n=t?null:n.sibling}}function wrapContext(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(t){return e}}const l=console.error;console.error=function(){const e=[...arguments].join("");if(!(e==null?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return l.apply(this,arguments);console.error=l};const d=wrapContext(e.createContext(null));class FiberProvider extends e.Component{render(){return e.createElement(d.Provider,{value:this._reactInternals},this.props.children)}}function useFiber(){const t=e.useContext(d);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const r=e.useId();const n=e.useMemo((()=>{for(const e of[t,t==null?void 0:t.alternate]){if(!e)continue;const t=traverseFiber(e,false,(e=>{let t=e.memoizedState;while(t){if(t.memoizedState===r)return true;t=t.next}}));if(t)return t}}),[t,r]);return n}function useContainer(){const t=useFiber();const r=e.useMemo((()=>traverseFiber(t,true,(e=>{var t;return((t=e.stateNode)==null?void 0:t.containerInfo)!=null}))),[t]);return r==null?void 0:r.stateNode.containerInfo}function useNearestChild(t){const r=useFiber();const n=e.useRef();c((()=>{var e;n.current=(e=traverseFiber(r,false,(e=>typeof e.type==="string"&&(t===void 0||e.type===t))))==null?void 0:e.stateNode}),[r]);return n}function useNearestParent(t){const r=useFiber();const n=e.useRef();c((()=>{var e;n.current=(e=traverseFiber(r,true,(e=>typeof e.type==="string"&&(t===void 0||e.type===t))))==null?void 0:e.stateNode}),[r]);return n}function useContextMap(){const t=useFiber();const[r]=e.useState((()=>new Map));r.clear();let n=t;while(n){if(n.type&&typeof n.type==="object"){const t=n.type._context===void 0&&n.type.Provider===n.type;const o=t?n.type:n.type._context;o&&o!==d&&!r.has(o)&&r.set(o,e.useContext(wrapContext(o)))}n=n.return}return r}function useContextBridge(){const t=useContextMap();return e.useMemo((()=>Array.from(t.keys()).reduce(((r,n)=>o=>e.createElement(r,null,e.createElement(n.Provider,__spreadProps(__spreadValues({},o),{value:t.get(n)})))),(t=>e.createElement(FiberProvider,__spreadValues({},t))))),[t])}export{FiberProvider,traverseFiber,useContainer,useContextBridge,useContextMap,useFiber,useNearestChild,useNearestParent};

